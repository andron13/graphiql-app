# Клиент REST/GraphiQL

Вам предстоит создать облегченную версию Postman и GraphiQL, объединенную в одном приложении.
Пожалуйста, ВНИМАТЕЛЬНО ПРОЧТИТЕ ОПИСАНИЕ ЗАДАЧИ ДО КОНЦА ПЕРЕД НАЧАЛОМ РАБОТЫ.

## Теоретические замечания

[**Postman**](https://www.postman.com/) — это богатая платформа для работы с API (и их создания). Однако вы можете использовать любой REST-клиент в качестве примера.
Он должен поддерживать выбор метода, URL, заголовки.
**GraphiQL** — это площадка/IDE для запросов GraphQL. Вы можете использовать [этот проект](https://www.npmjs.com/package/@graphiql/react) в качестве примера.

Дополнительные части, которые ваше приложение также должно включать:

- Возможности авторизации и аутентификации, обеспечивающие доступ к инструменту только авторизованным пользователям.
- Раздел истории, который будет перенаправлять пользователя в определенный раздел для ранее выполненных запросов.

## Формирование команды

- Вы должны работать в команде из 3 человек.
- Вам нужно выбрать тимлида, который будет координировать разработку.

## Прототип приложения

Вы можете использовать существующие решения, такие как (https://graphql.github.io/swapi-graphql) и [Thunder Client для VSCode](https://marketplace.visualstudio.com/items?itemName=rangav.vscode-thunder-client) как источник вдохновения.
Однако обратите внимание, что окончательное решение по набору инструментов и дизайну остается за вами, чтобы не ограничивать ваши возможности и воображение.
Дизайн, прототипирование, а также реализация приложения находятся на вашем усмотрении.

## Backend / API

- Приложению не требуется серверной части.
- Приложение должно поддерживать любой открытый пользовательский API (RESTful или GraphQL).
- Вы будете использовать либо NextJS, либо Remix для выполнения запросов к конечной точке через сервер. Так вы избежите проблем, связанных с [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS).

## Структура приложения

Ваше приложение должно содержать:

1. Страницу приветствия
2. Регистрацию/аутентификацию пользователя.
3. RESTful клиент, который включает:
   - выбор метода
   - текстовое поле для URL конечной точки
   - редактор запросов
   - редактор заголовков
   - раздел ответа
4. Клиент GraphiQL, который включает:
   - текстовое поле для URL конечной точки
   - редактор запросов
   - редактор переменных
   - редактор заголовков
   - текстовое поле для URL конечной точки, используемое для получения документации (SDL)
   - проводник по документации
   - раздел ответа

## Требования к репозиторию

- Тимлид должен создать приватный репозиторий на GitHub и пригласить других участников.
- Название репозитория **graphiql-app**. Название ветки для разработки - **develop**, ветка **main** пуста и содержит только README.md
- История коммитов должна отображать процесс разработки приложения. [Требования к коммитам](https://docs.rs.school/#/git-convention)
- Демонстрационная версия приложения должна быть развернута на `gh-pages`, `netlify`, `heroku` или другом аналогичном сервисе.
- После завершения задачи создайте pull request из ветки **develop** в ветку **main**. **Слияние Pull Request не требуется**.
- В случае использования прокси-сервиса необходимо включить инструкции по его запуску локально.
- Вы должны сделать репозиторий публичным после дедлайна.

## Рабочий процесс/Стратегия ветвления

Вы можете выбрать собственный способ разработки проекта и репозитория. Вот ссылки на описание и анализ популярных практик.

[Patterns for Managing Source Code Branches](https://martinfowler.com/articles/branching-patterns.html)
[Gitflow Workflow](https://www.atlassian.com/ru/git/tutorials/comparing-workflows/gitflow-workflow)
[GitHub flow](https://docs.github.com/en/get-started/quickstart/github-flow)
[ThreeFlow](https://habr.com/ru/company/infopulse/blog/345826/)
[GitLab Flow VS Git flow VS GitHub flow](https://yapro.ru/article/6172)

## Технические требования

- Семантическая разметка
- Приложение должно работать как минимум в последней версии браузера Google Chrome
- Приватные маршруты, 404, обработчик ошибок
- Использование jQuery в основном коде приложения не допускается (может быть частью других библиотек, так что обращайте внимание на то, что вы используете)
- Вы ДОЛЖНЫ использовать React 18 и выше
- Вы ДОЛЖНЫ использовать либо NextJS, либо Remix с Vite
- Вы можете использовать любые CSS-фреймворки, любые JS/компонентные библиотеки, HTML и CSS препроцессоры
- Вы ДОЛЖНЫ использовать TypeScript
- Тесты должны присутствовать в проекте (**test** команда в package.json), и покрытие тестами должно быть указано при запуске команды; покрытие тестами должно быть не менее 80%
- Eslint, prettier (**lint** и **prettier-fix** команды в package.json)
- Husky hooks (выполнять **lint** при коммите, **test** при пуше)
- ❗ Копирование кода других студентов или [GraphiQL](https://www.npmjs.com/package/@graphiql/react) запрещено. Это касается HTML, CSS и JS кода. Вы можете использовать небольшие фрагменты кода из Stack Overflow и других найденных источников в интернете, кроме репозиториев на GitHub студентов.

## Требования к дизайну приложения

- Качество приложения определяется проработанностью деталей, вниманием к типографике (не более трех шрифтов на странице, размер шрифта не менее 14 px, оптимальный [контраст шрифта и фона](https://snook.ca/technical/colour_contrast/colour.html)), тщательно подобранным контентом.
- Интерактивность элементов, с которыми могут взаимодействовать пользователи; эффекты наведения на элементы; использование различных стилей для активного и неактивного состояния элемента; плавные анимации.
- Единство стиля всех страниц приложения - одинаковые шрифты, стили кнопок, отступы и одинаковый вид и расположение элементов на всех страницах приложения. Цвета элементов и фоны могут различаться. В этом случае цвета должны быть из одной палитры, а фоны - из одной коллекции.

## Описание функциональных блоков

### Общие требования

- Ошибки (маршрут не найден, необработанный отказ и т.д.) должны отображаться в удобном для пользователя формате (toast, всплывающее окно и т.п. - на ваше усмотрение).
- Интернационализация (i18n) - как минимум 2 языка. Пользователь должен иметь возможность изменить язык, щелкнув на переключатель/выбор в заголовке.

#### Обработка ошибок

Приложение должно корректно обрабатывать ошибки и показывать пользователю понятные сообщения.
Пожалуйста, различайте ошибки на уровне приложения и валидные HTTP-коды ошибок.
Проблемы с CORS или таймауты сети должны отображаться как ошибки, в то время как коды ответа HTTP 4xx и 5xx должны отображаться в разделе ответа.

### Страница приветствия

- Если пользователь не авторизован, страница должна содержать ссылку на страницу Входа/Регистрации.
- Если пользователь авторизован, страница должна содержать ссылки на RESTful клиент, клиент GraphiQL, раздел Истории.

#### Шаблон страницы приветствия. Пользователь не вошел в систему

```
+----------------------------------------------------+
|                      Заголовок                     |
|  +---------------------------------------------+   |
|  | [Логотип] | Переключатель языка | [Вход]      |   |
|  +---------------------------------------------+   |
+----------------------------------------------------+
|                                                    |
|   +--------------------------------------------+   |
|   |                                            |   |
|   |                Добро пожаловать!           |   |
|   |                                            |   |
|   | [Вход] [Регистрация]                       |   |
|   |                                            |   |
|   +--------------------------------------------+   |
|                                                    |
+----------------------------------------------------+
|                      Подвал                        |
|    [Ссылка на GitHub] | Год | [Логотип курса]      |
+----------------------------------------------------+
```

#### Шаблон страницы приветствия. Пользователь вошел в систему

```
+----------------------------------------------------+
|                      Заголовок                     |
|  +---------------------------------------------+   |
|  | [Логотип] | Переключатель языка | [Выход]     |   |
|  +---------------------------------------------+   |
+----------------------------------------------------+
|                                                    |
|   +--------------------------------------------+   |
|   |                                            |   |
|   |         С возвращением, [Имя пользователя]! |   |
|   |                                            |   |
|   +--------------------------------------------+   |
|                                                    |
|  +--------------------------------------------+    |


|  |              [REST Client] [GraphiQL Client] |   |
|  +--------------------------------------------+    |
|                                                    |
|   +--------------------------------------------+   |
|   |                 [История]                   |   |
|   |                                            |   |
|   +--------------------------------------------+   |
|                                                    |
+----------------------------------------------------+
|                      Подвал                        |
|    [Ссылка на GitHub] | Год | [Логотип курса]      |
+----------------------------------------------------+
```

### Регистрация / Аутентификация

- Регистрация / вход / выход пользователей
- Должен быть реализован прототип для входа и регистрации пользователей с использованием email и пароля.
- Должен быть реализован прототип для выхода из системы.
- Необходимо продумать защиту от подделки запросов (CSRF) и защиту от повторных отправок (Replay Attack).

#### Шаблон страницы аутентификации

```
+----------------------------------------------------+
|                      Заголовок                     |
|  +---------------------------------------------+   |
|  | [Логотип] | Переключатель языка | [Вход]      |   |
|  +---------------------------------------------+   |
+----------------------------------------------------+
|                                                    |
|   +--------------------------------------------+   |
|   |                                            |   |
|   |       Вход/Регистрация в систему           |   |
|   |                                            |   |
|   |  Email: [____________________]            |   |
|   |  Пароль: [____________________]            |   |
|   |                                            |   |
|   |  [Вход] [Регистрация]                      |   |
|   |                                            |   |
|   +--------------------------------------------+   |
|                                                    |
+----------------------------------------------------+
|                      Подвал                        |
|    [Ссылка на GitHub] | Год | [Логотип курса]      |
+----------------------------------------------------+
```

### RESTful клиент

- Клиент должен поддерживать методы GET, POST, PUT, DELETE.
- Поле для ввода URL конечной точки
- Редактор запросов
- Редактор заголовков
- Раздел ответа, показывающий статус-код, заголовки и тело ответа

#### Шаблон RESTful клиента

```
+----------------------------------------------------+
|                      Заголовок                     |
|  +---------------------------------------------+   |
|  | [Логотип] | Переключатель языка | [Выход]     |   |
|  +---------------------------------------------+   |
+----------------------------------------------------+
|                                                    |
|   +--------------------------------------------+   |
|   |                                            |   |
|   |        Метод: [GET] [POST] [PUT] [DELETE] |   |
|   |                                            |   |
|   +--------------------------------------------+   |
|                                                    |
|   +--------------------------------------------+   |
|   | URL конечной точки: [___________________]   |   |
|   |                                            |   |
|   | [Обновить] [Отправить]                     |   |
|   |                                            |   |
|   +--------------------------------------------+   |
|                                                    |
|   +--------------------------------------------+   |
|   | Заголовки                                 |   |
|   | [_____________________]                   |   |
|   |                                            |   |
|   +--------------------------------------------+   |
|                                                    |
|   +--------------------------------------------+   |
|   | Ответ                                     |   |
|   | Статус: [200 OK]                           |   |
|   | Заголовки: [__________________________]    |   |
|   |                                            |   |
|   | Тело: [______________________________]      |   |
|   |                                            |   |
|   +--------------------------------------------+   |
|                                                    |
+----------------------------------------------------+
|                      Подвал                        |
|    [Ссылка на GitHub] | Год | [Логотип курса]      |
+----------------------------------------------------+
```

### GraphiQL клиент

- Поле для ввода URL конечной точки
- Редактор запросов
- Редактор переменных
- Редактор заголовков
- Текстовое поле для URL конечной точки, используемое для получения документации (SDL)
- Проводник по документации
- Раздел ответа, показывающий данные, ошибки и другие результаты

#### Шаблон GraphiQL клиента

```
+----------------------------------------------------+
|                      Заголовок                     |
|  +---------------------------------------------+   |
|  | [Логотип] | Переключатель языка | [Выход]     |   |
|  +---------------------------------------------+   |
+----------------------------------------------------+
|                                                    |
|   +--------------------------------------------+   |
|   | URL конечной точки: [___________________]   |   |
|   |                                            |   |
|   | [Обновить] [Отправить]                     |   |
|   |                                            |   |
|   +--------------------------------------------+   |
|                                                    |
|   +--------------------------------------------+   |
|   | Редактор запросов                         |   |
|   | [______________________________]           |   |
|   +--------------------------------------------+   |
|                                                    |
|   +--------------------------------------------+   |
|   | Редактор переменных                       |   |
|   | [______________________________]           |   |
|   +--------------------------------------------+   |
|                                                    |
|   +--------------------------------------------+   |
|   | Редактор заголовков                       |   |
|   | [______________________________]           |   |
|   +--------------------------------------------+   |
|                                                    |
|   +--------------------------------------------+   |
|   | Документация (SDL)                        |   |
|   | [______________________________]           |   |
|   +--------------------------------------------+   |
|                                                    |
|   +--------------------------------------------+   |
|   | Ответ                                     |   |
|   | Данные: [___________________________]      |   |
|   | Ошибки: [___________________________]     |   |
|   +--------------------------------------------+   |
|                                                    |
+----------------------------------------------------+
|                      Подвал                        |
|    [Ссылка на GitHub] | Год | [Логотип курса]      |
+----------------------------------------------------+
```

### Раздел Истории

- Хранение и отображение ранее выполненных запросов для RESTful и GraphiQL клиентов
- Возможность повторного выполнения запросов из истории

### Шаблон истории с запросами

```
+----------------------------------------------------+
|                      Заголовок                     |
|  +---------------------------------------------+   |
|  | [Логотип] | Переключение языка | [Выйти]     |   |
|  +---------------------------------------------+   |
+----------------------------------------------------+
|                                                    |
|   +--------------------------------------------+   |
|   |              История запросов              |   |
|   +--------------------------------------------+   |
|                                                    |
|  +----------------------------------------------+  |
|  | [GET https://api.example.com/resource/1]     |  |
|  | [POST https://api.example.com/resource]      |  |
|  | [GRAPHQL https://graphql.example.com/query]  |  |
|  +----------------------------------------------+  |
|                                                    |
+----------------------------------------------------+
|                       Футер                        |
|    [Ссылка на GitHub] | Год | [Логотип курса]      |
+----------------------------------------------------+
```

## Как отправить задачи

- Ссылку на pull request в приложении RS отправляет **только тимлидер** ❗
- Убедитесь, что pull request доступен для проверки ❗. Для этого откройте ссылку, которую вы отправляете в приложении RS, в режиме инкогнито браузера.
- Если задача не отправлена до дедлайна, она не будет участвовать в перекрёстной проверке, и баллы не будут добавлены к вашему результату.

## Критерии оценки

**Максимальное количество баллов за задачу — 400**

Состоит из:

- максимум 400 за перекрёстную проверку
- максимум 50 за участие в проекте. Эти баллы будут присваиваться ментором каждому студенту.

## Критерии перекрёстной проверки

Для удобства проверки **обязательно** записать и выложить на YouTube короткое (5-7 мин) видео с объяснением для ревьюеров, как реализован каждый из пунктов, перечисленных в критериях оценки. Добавьте ссылку на видео в pull request.
[Как оценивать задачи в перекрёстной проверке](https://docs.rs.school/#/ru/cross-check-flow). В комментариях к оценке необходимо указать, какие пункты не выполнены или выполнены частично.

### Маршрут приветствия - максимум 50 баллов

- [ ] Приветственная страница должна содержать общую информацию о разработчиках, проекте и курсе. - **10 баллов**
- [ ] В верхнем правом углу есть 2 кнопки: Войти и Зарегистрироваться. - **10 баллов**
- [ ] Если токен авторизации действителен и не истёк, кнопки Войти и Зарегистрироваться заменяются на кнопку "Главная страница". - **10 баллов**
- [ ] При истечении срока действия токена пользователь должен автоматически перенаправляться на страницу приветствия. - **10 баллов**
- [ ] Нажатие на кнопку Войти / Зарегистрироваться перенаправляет пользователя на маршрут с формой входа/регистрации. - **10 баллов**

### Вход / Регистрация - максимум 50 баллов

- [ ] Кнопки для Входа / Регистрации / Выхода есть везде, где они должны быть. - **10 баллов**
- [ ] Реализована валидация на стороне клиента. - **20 баллов**
- [ ] После успешного входа пользователь перенаправляется на главную страницу. - **10 баллов**
- [ ] Если пользователь уже вошёл в систему и пытается перейти по этим маршрутам, его нужно перенаправить на главную страницу. - **10 баллов**

### REST-клиент - максимум 120 баллов

- [ ] Функциональный редактор с возможностью редактирования и форматирования запроса, тело запроса предоставляется в URL в виде base64-кодирования при потере фокуса. - **40 баллов**
- [ ] Функциональный только для чтения раздел ответа, с информацией о статусе HTTP и коде. - **30 баллов**
- [ ] Селектор метода, показывает все допустимые HTTP-глаголы, значение предоставляется в URL при изменении. - **10 баллов**
- [ ] Поле ввода для URL, введённое значение предоставляется в виде base64-кодирования при изменении. - **15 баллов**
- [ ] Раздел переменных, который можно показать или скрыть, указанные переменные включены в тело запроса. - **15 баллов**
- [ ] Раздел заголовков, значение предоставляется в URL при добавлении/изменении заголовка. - **20 баллов**

### GraphiQL маршрут - максимум 80 баллов

- [ ] Функциональный редактор с возможностью редактирования и форматирования запроса, тело запроса предоставляется в URL в виде base64-кодирования при потере фокуса. - **35 баллов**
- [ ] Только для чтения раздел ответа, с информацией о статусе HTTP и коде, используется повторно из REST-клиента. - **5 баллов**
- [ ] Оперативный исследователь документации, видимый _только_ после успешного запроса SDL. - **20 баллов**
- [ ] Раздел переменных, который можно показать или скрыть, указанные переменные включены в тело запроса. - **10 баллов**
- [ ] Раздел заголовков, который можно показать или скрыть, значение предоставляется в URL при добавлении/изменении заголовка. - **10 баллов**

### Маршрут истории - максимум 50 баллов

- [ ] История показывает информационное сообщение с ссылками на клиентов, когда в локальном хранилище нет запросов. - **10 баллов**
- [ ] Пользователь может перейти к ранее выполненному HTTP-запросу к REST-клиенту, метод HTTP, URL, тело, заголовки, переменные восстанавливаются. **20 баллов**
- [ ] Пользователь может перейти к ранее выполненному GraphQL-запросу к клиенту GraphiQL, URL, SDL URL, тело, заголовки, переменные восстанавливаются. **20 баллов**

### Общие требования - максимум 50 баллов

- [ ] Поддержка нескольких (не менее 2) языков / i18n. - **30 баллов**
- [ ] Фиксированный заголовок. - **10 баллов**
- [ ] Ошибки отображаются в удобном для пользователя формате. - **10 баллов**

### Штрафы

- [ ] Фавикон по умолчанию Vite/NextJS **-50 баллов**
- [ ] Статус коды HTTP 4xx и 5xx отображаются как ошибки не в разделе ответа **-50 баллов**
- [ ] Наличие ошибок и предупреждений в консоли **-20 баллов** за каждую
- [ ] Наличие в консоли результатов выполнения console.log **-20 баллов** за каждую
- [ ] @ts-ignore или любое использование (поиск по GitHub репозиторию) **-20 баллов** за каждую
- [ ] Наличие _code-smells_ (объектов God, фрагментов дублированного кода), прокомментированные разделы кода **-10 баллов за каждый**
- [ ] Коммиты после дедлайна **-100 баллов**
- [ ] Отсутствие тестов **-250 баллов**
- [ ] Покрытие тестами менее 80% **-100 баллов**
- [ ] Отсутствие линтинга **-150 баллов**
- [ ] Отсутствие prettier **-100 баллов**
- [ ] Отсутствие git хуков husky **-100 баллов**
- [ ] Pull Request не соответствует руководству (включая флажки в Score) [Пример PR](https://docs.rs.school/#/ru/pull-request-review-process?id=pr-description-must-contain-the-following) **-10 баллов**
- [ ] Администрация оставляет за собой право применить штрафы за использование неправильных имен репозиториев или веток
